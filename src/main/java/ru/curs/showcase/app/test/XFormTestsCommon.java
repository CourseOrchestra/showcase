package ru.curs.showcase.app.test;

import java.util.*;

import ru.curs.showcase.app.api.datapanel.*;
import ru.curs.showcase.app.api.event.*;
import ru.curs.showcase.app.api.html.*;
import ru.curs.showcase.app.client.XFormPanel;

import com.google.gwt.user.client.DOM;
import com.google.gwt.user.client.ui.RootPanel;

/**
 * Вспомогательный класс для тестирования XFormPanel и
 * XFormPanelCallbacksEvents.
 */
public final class XFormTestsCommon {

	// CHECKSTYLE:OFF
	public static final String XFORM_DATA =
		"<schema xmlns=\"\"><info><name>Николай</name><growth/><eyescolour>Зеленый</eyescolour><music>Инструментальная Эстрадная</music><comment>dddddddddd</comment></info></schema>";

	public static final int LEN_MAININSTANCE = 8;

	private static final String XFORM_2_BODY =
		"<span class=\"xforms-message\" id=\"xsltforms-mainform-message-2_2_4_4_2_2_\">Submission успешно выполнен</span><span class=\"xforms-message\" id=\"xsltforms-mainform-message-2_4_4_4_2_2_\">Ошибка при выполнении submission:<span id=\"xsltforms-mainform-output-2_2_4_4_4_2_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></span><span class=\"xforms-message\" id=\"xsltforms-mainform-message-2_2_6_4_2_2_\">Submission успешно выполнен</span><span class=\"xforms-message\" id=\"xsltforms-mainform-message-2_4_6_4_2_2_\">Ошибка при выполнении submission:<span id=\"xsltforms-mainform-output-2_2_4_6_4_2_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></span><div style=\"font-size: 15px;\"> Имя: </div><div><span id=\"xsltforms-mainform-input-2_4_4_2_\" class=\"xforms-disabled xforms-control xforms-input xforms-appearance-minimal\"><span class=\"value\"><input type=\"text\" class=\"xforms-value\"></input></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span><span class=\"xforms-hint\"><span class=\"xforms-hint-icon\" onmouseover=\"XsltForms_browser.show(this, 'hint', true)\" onmouseout=\"XsltForms_browser.show(this, 'hint', false)\"> </span><span class=\"xforms-hint-value\" id=\"xsltforms-mainform-hint-4_2_4_4_2_\">Дополнительная информация</span></span><span class=\"xforms-help\"><span class=\"xforms-help-icon\" onmouseover=\"XsltForms_browser.show(this, 'help', true)\" onmouseout=\"XsltForms_browser.show(this, 'help', false)\"> </span><span class=\"xforms-help-value\" id=\"xsltforms-mainform-help-2_2_4_4_2_\">Справка</span></span></span><span id=\"xsltforms-mainform-trigger-4_4_4_2_\" class=\"xforms-disabled xforms-control xforms-trigger xforms-appearance-minimal\"><span class=\"value\"><button type=\"button\"><span id=\"xsltforms-mainform-label-2_4_4_4_2_\" class=\"xforms-label\">Selector</span></button></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></div><div style=\"font-size: 15px;\"> Цвет глаз (1): </div><div><span id=\"xsltforms-mainform-select1-2_8_4_2_\" class=\"xforms-disabled xforms-control xforms-select1 xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"><div id=\"xsltforms-mainform-item-2_2_8_4_2_\" class=\"xforms-disabled xforms-item\"><input type=\"radio\" value=\"Голубой\" class=\"xforms-value\"></input><span id=\"xsltforms-mainform-label-2_2_2_8_4_2_\" class=\"xforms-item-label\">Голубой</span></div><div id=\"xsltforms-mainform-item-4_2_8_4_2_\" class=\"xforms-disabled xforms-item\"><input type=\"radio\" value=\"Карий\" class=\"xforms-value\"></input><span id=\"xsltforms-mainform-label-2_4_2_8_4_2_\" class=\"xforms-item-label\">Карий</span></div><div id=\"xsltforms-mainform-item-6_2_8_4_2_\" class=\"xforms-disabled xforms-item\"><input type=\"radio\" value=\"Зеленый\" class=\"xforms-value\"></input><span id=\"xsltforms-mainform-label-2_6_2_8_4_2_\" class=\"xforms-item-label\">Зеленый</span></div><div id=\"xsltforms-mainform-item-8_2_8_4_2_\" class=\"xforms-disabled xforms-item\"><input type=\"radio\" value=\"Серый\" class=\"xforms-value\"></input><span id=\"xsltforms-mainform-label-2_8_2_8_4_2_\" class=\"xforms-item-label\">Серый</span></div></span></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></div><div style=\"font-size: 15px;\"> Цвет глаз (2): </div><div><span id=\"xsltforms-mainform-select1-2_12_4_2_\" class=\"xforms-disabled xforms-control xforms-select1 xforms-appearance-minimal\"><span class=\"value\"><select class=\"xforms-value\"><option value=\"Голубой\" id=\"xsltforms-mainform-item-2_2_12_4_2_\">Голубой</option><option value=\"Карий\" id=\"xsltforms-mainform-item-4_2_12_4_2_\">Карий</option><option value=\"Зеленый\" id=\"xsltforms-mainform-item-6_2_12_4_2_\">Зеленый</option><option value=\"Серый\" id=\"xsltforms-mainform-item-8_2_12_4_2_\">Серый</option></select></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></div><div style=\"font-size: 15px;\"> Любимая музыка (1): </div><div><span id=\"xsltforms-mainform-select-2_16_4_2_\" class=\"xforms-disabled xforms-control xforms-select xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"><div id=\"xsltforms-mainform-item-2_2_16_4_2_\" class=\"xforms-disabled xforms-item\"><input type=\"checkbox\" value=\"Классическая\" class=\"xforms-value\"></input><span id=\"xsltforms-mainform-label-2_2_2_16_4_2_\" class=\"xforms-item-label\">Классическая</span></div><div id=\"xsltforms-mainform-item-4_2_16_4_2_\" class=\"xforms-disabled xforms-item\"><input type=\"checkbox\" value=\"Инструментальная\" class=\"xforms-value\"></input><span id=\"xsltforms-mainform-label-2_4_2_16_4_2_\" class=\"xforms-item-label\">Инструментальная</span></div><div id=\"xsltforms-mainform-item-6_2_16_4_2_\" class=\"xforms-disabled xforms-item\"><input type=\"checkbox\" value=\"Эстрадная\" class=\"xforms-value\"></input><span id=\"xsltforms-mainform-label-2_6_2_16_4_2_\" class=\"xforms-item-label\">Эстрадная</span></div></span></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></div><div style=\"font-size: 15px;\"> Любимая музыка (2): </div><div><span id=\"xsltforms-mainform-select-2_20_4_2_\" class=\"xforms-disabled xforms-control xforms-select xforms-appearance-minimal\"><span class=\"value\"><select class=\"xforms-value\" multiple=\"true\" size=\"3\"><option value=\"Классическая\" id=\"xsltforms-mainform-item-2_2_20_4_2_\">Классическая</option><option value=\"Инструментальная\" id=\"xsltforms-mainform-item-4_2_20_4_2_\">Инструментальная</option><option value=\"Эстрадная\" id=\"xsltforms-mainform-item-6_2_20_4_2_\">Эстрадная</option></select></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></div><div style=\"font-size: 15px;\"> Комментарии: </div><div><span id=\"xsltforms-mainform-textarea-2_24_4_2_\" class=\"xforms-disabled xforms-control xforms-textarea xforms-appearance-minimal\"><span class=\"value\"><textarea class=\"xforms-value\"> </textarea></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></div><div style=\"clear: both;\"><span id=\"xsltforms-mainform-output-4_26_4_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-output-6_26_4_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-output-8_26_4_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-output-10_26_4_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-output-12_26_4_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-output-14_26_4_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-output-16_26_4_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-output-18_26_4_2_\" class=\"xforms-disabled xforms-control xforms-output xforms-appearance-minimal\"><span class=\"value\"><span class=\"xforms-value\"> </span></span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></div><div><span id=\"xsltforms-mainform-trigger-2_28_4_2_\" class=\"xforms-disabled xforms-control xforms-trigger xforms-appearance-minimal\"><span class=\"value\"><button type=\"button\"><span id=\"xsltforms-mainform-label-2_2_28_4_2_\" class=\"xforms-label\">Вызов XFormsSubmissionServlet</span></button></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-trigger-4_28_4_2_\" class=\"xforms-disabled xforms-control xforms-trigger xforms-appearance-minimal\"><span class=\"value\"><button type=\"button\"><span id=\"xsltforms-mainform-label-2_4_28_4_2_\" class=\"xforms-label\">Вызов XFormsSubmissionServlet с ошибкой</span></button></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-trigger-6_28_4_2_\" class=\"xforms-disabled xforms-control xforms-trigger xforms-appearance-minimal\"><span class=\"value\"><button type=\"button\"><span id=\"xsltforms-mainform-label-2_6_28_4_2_\" class=\"xforms-label\">Вызов XFormsTransformationServlet</span></button></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></div><div><span id=\"xsltforms-mainform-trigger-2_30_4_2_\" class=\"xforms-disabled xforms-control xforms-trigger xforms-appearance-minimal\"><span class=\"value\"><button type=\"button\"><span id=\"xsltforms-mainform-label-2_2_30_4_2_\" class=\"xforms-label\">Сохранить</span></button></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-trigger-6_30_4_2_\" class=\"xforms-disabled xforms-control xforms-trigger xforms-appearance-minimal\"><span class=\"value\"><button type=\"button\"><span id=\"xsltforms-mainform-label-2_6_30_4_2_\" class=\"xforms-label\">Отфильтровать</span></button></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span><span id=\"xsltforms-mainform-trigger-8_30_4_2_\" class=\"xforms-disabled xforms-control xforms-trigger xforms-appearance-minimal\"><span class=\"value\"><button type=\"button\"><span id=\"xsltforms-mainform-label-2_8_30_4_2_\" class=\"xforms-label\">Обновить</span></button></span><span class=\"xforms-required-icon\">*</span><span class=\"xforms-alert\"><span class=\"xforms-alert-icon\"> </span></span></span></div><div id=\"xsltforms_console\"> </div><div id=\"statusPanel\">... Loading ... </div>";

	private static final String XFORM_2_CSS =
		"div.ScrollPanel { margin: 0px; padding: 0px; width: 949px; height: 270px; overflow-y: auto; overflow-x: hidden; } th.TableHeader { background-color: #5A8BC3; color: white; padding: 2px; text-align: center; } .xforms-value { border: 1px solid #B3B3B3; padding: 0.3em; margin: 0px 1px 0px 0px; font-size: 11px; width: 96px; } th.NameHeader { width: 900px; } th.SobNumberHeader { width: 26px; } th.SobNameHeader { width: 310px; } th.SobResponsibleHeader { width: 310px; } th.SobConsiderHeader { width: 20px; text-align: center; } th.SobResponsibleHeader1 { width: 184px; } th.SobDateHeader1 { width: 86px; } th.SobPeriodHeader1 { } .InfoTable { text-align: left; background-color: white; color: black; } .WarningInput .xforms-value { color: red; border: 0px; font-weight: bold; width: 800px; font-size: 120%; } .HintInput .xforms-value { color: green; border: 0px; font-weight: bold; width: 800px; font-size: 100%; } .RoleInput .xforms-value { width: 806px; } .StatusInput .xforms-value { width: 785px; } .PeriodInput .xforms-value { width: 120px; } .ExecutorElemInput .xforms-value { width: 816px; } .ExecutorInput .xforms-value { width: 806px; } .ProjectInput .xforms-value { width: 806px; } .TransitionInput .xforms-value { width: 660px; } .DateInput .xforms-value { width: 60px; } .FIOInput .xforms-value { width: 806px; } .EmailInput .xforms-value { width: 200px; } .TelInput .xforms-value { width: 200px; } .RemarkInput .xforms-value { width: 806px; height: 450px; } .CommentInput .xforms-value { width: 806px; height: 100px; } .TaskInput .xforms-value { width: 675px; background-color: #bbbbbb; } .NaprInput .xforms-value { width: 675px; } .ResponsibleInput .xforms-value { width: 675px; } .ConsiderInput .xforms-value { width: 22px; } .CodeInput .xforms-value { width: 50px; } .NaznInput .xforms-value { width: 806px; text-align: right; border: 0px; } .NameInput .xforms-value { width: 870px; } .TaskInput1 .xforms-value { width: 940px; text-align: center; } .NumberInput1 .xforms-value { width: 70%; margin-top: 1px; border: 0px; } .NameInput1 .xforms-value { width: 162px; border: 0px; } .ResponsibleInput1 .xforms-value { width: 191px; border: 0px; } .NumberInput .xforms-value { width: 17px; border: 0px; } .ActionInput .xforms-value { width: 301px; border: 0px; } .ConsiderInput .xforms-value { width: 10px; border: 0px; } .Pok1Input1 .xforms-value { width: 80px; border: 0px; } .DateInput1 .xforms-value { width: 64%; border: 0px; } .CauseInput1 .xforms-value { width: 96.8%; border: 0px; } th.SobNumberHeader1, th.SobNumberHeader, th.SobNameHeader, th.SobAntiKrHeader, th.SobResponsibleHeader, th.SobPeriodHeader1, th.SobConsiderHeader { vertical-align: middle; font-size: 10px; background-color: #5A8BC3; color: white; } .xforms-invalid .xforms-value { border: 1px solid red; } div.Hide { display: none; } div.Show { display: inline; }";
	private static final String XFORM_2_SCRIPT1 =
		"var xsltforms_d0 = new Date();/* XsltForms_MagicSeparator */XsltForms_globals.language = \"navigator\";XsltForms_globals.loadingMsg = \"... Loading ...\";XsltForms_globals.valuesSeparator = \" \";function xsltforms_initImpl() {XsltForms_globals.debugMode = false;XsltForms_globals.xsltEngine = \"Saxonica http://www.saxonica.com/ \";XsltForms_browser.jsFileName='xsltforms.js';XsltForms_browser.isXhtml = false;XsltForms_globals.ltchar = \"<\"; XsltForms_browser.isEscaped = XsltForms_globals.ltchar.length != 1;XsltForms_browser.config = null;var xsltforms_subform_eltid = null;var xsltforms_parentform = null;/* XsltForms_MagicSeparator */ try {XsltForms_browser.dialog.show('statusPanel');var xsltforms_subform = new XsltForms_subform(xsltforms_parentform, \"xsltforms-mainform\", xsltforms_subform_eltid);if (xsltforms_subform.id === \"xsltforms-mainform\") {var d1 = new Date();XsltForms_globals.htmltime = d1 - xsltforms_d0;}XsltForms_xpath.create(xsltforms_subform,\"'! Ваш рост: '\",false,new XsltForms_cteExpr('! Ваш рост: '));XsltForms_xpath.create(xsltforms_subform,\"', ваш музыкальные предпочения: '\",false,new XsltForms_cteExpr(', ваш музыкальные предпочения: '));XsltForms_xpath.create(xsltforms_subform,\"', ваш цвет глаз: '\",false,new XsltForms_cteExpr(', ваш цвет глаз: '));XsltForms_xpath.create(xsltforms_subform,\"'Уважаемый '\",false,new XsltForms_cteExpr('Уважаемый '));XsltForms_xpath.create(xsltforms_subform,\".\",false,new XsltForms_locationExpr(false,new XsltForms_stepExpr('self',new XsltForms_nodeTestAny())));XsltForms_xpath.create(xsltforms_subform,\"/schema/info/comment\",false,new XsltForms_locationExpr(true,new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','schema')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','info')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','comment'))));XsltForms_xpath.create(xsltforms_subform,\"/schema/info/eyescolour\",false,new XsltForms_locationExpr(true,new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','schema')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','info')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','eyescolour'))));XsltForms_xpath.create(xsltforms_subform,\"/schema/info/growth\",false,new XsltForms_locationExpr(true,new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','schema')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','info')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','growth'))));XsltForms_xpath.create(xsltforms_subform,\"/schema/info/music\",false,new XsltForms_locationExpr(true,new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','schema')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','info')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','music'))));XsltForms_xpath.create(xsltforms_subform,\"/schema/info/name\",false,new XsltForms_locationExpr(true,new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','schema')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','info')),new XsltForms_stepExpr('child',new XsltForms_nodeTestName('','name'))));XsltForms_xpath.create(xsltforms_subform,\"event('response-body')\",false,new XsltForms_functionCallExpr('http://www.w3.org/2002/xforms event',new XsltForms_cteExpr('response-body')));XsltForms_xpath.create(xsltforms_subform,\"event('response-body')!='null'\",false,new XsltForms_binaryExpr(new XsltForms_functionCallExpr('http://www.w3.org/2002/xforms event',new XsltForms_cteExpr('response-body')),'!=',new XsltForms_cteExpr('null')));XsltForms_xpath.create(xsltforms_subform,\"instance('mainInstance')\",false,new XsltForms_functionCallExpr('http://www.w3.org/2002/xforms instance',new XsltForms_cteExpr('mainInstance')));var xsltforms_model_4_2_2_ = XsltForms_model.create(xsltforms_subform,\"mainModel\",null,null,null);XsltForms_instance.create(xsltforms_subform,\"mainInstance\",xsltforms_model_4_2_2_,false,\"application/xml\",null,'<schema><info><name>Николай</name><growth/><eyescolour>Зеленый</eyescolour><music>Инструментальная Эстрадная</music><comment>dddddddddd</comment></info></schema>');new XsltForms_submission(xsltforms_subform,\"wrong_save\",xsltforms_model_4_2_2_,\"instance('mainInstance')\",null,\"secured/submit?userdata=default&proc=xforms_submission11\",\"post\",null,null,null,null,null,null,\"instance\",null,\"mainInstance\",\"&\",null,true,true,true,null,null);var xsltforms_message_2_2_4_4_2_2_ = new XsltForms_message(xsltforms_subform,xsltforms_subform.id + \"-message-2_2_4_4_2_2_\",null,null,null,null,null);var xsltforms_action_2_4_4_2_2_ = new XsltForms_action(xsltforms_subform,null,null,null).add(xsltforms_message_2_2_4_4_2_2_);var xsltforms_message_2_4_4_4_2_2_ = new XsltForms_message(xsltforms_subform,xsltforms_subform.id + \"-message-2_4_4_4_2_2_\",null,null,null,null,null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-2_2_4_4_4_2_2_\",0,new XsltForms_binding(\"xsd:string\", \"event('response-body')\"),null);var xsltforms_action_4_4_4_2_2_ = new XsltForms_action(xsltforms_subform,\"event('response-body')!='null'\",null,null).add(xsltforms_message_2_4_4_4_2_2_);new XsltForms_listener(document.getElementById(\"wrong_save\"),null,\"xforms-submit-done\",null,function(evt) {XsltForms_browser.run(xsltforms_action_2_4_4_2_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});new XsltForms_listener(document.getElementById(\"wrong_save\"),null,\"xforms-submit-error\",null,function(evt) {XsltForms_browser.run(xsltforms_action_4_4_4_2_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});new XsltForms_submission(xsltforms_subform,\"good_save\",xsltforms_model_4_2_2_,\"instance('mainInstance')\",null,\"secured/submit?userdata=default&proc=xforms_submission1\",\"post\",null,null,null,null,null,null,\"instance\",null,\"mainInstance\",\"&\",null,true,true,true,null,null);var xsltforms_message_2_2_6_4_2_2_ = new XsltForms_message(xsltforms_subform,xsltforms_subform.id + \"-message-2_2_6_4_2_2_\",null,null,null,null,null);var xsltforms_action_2_6_4_2_2_ = new XsltForms_action(xsltforms_subform,null,null,null).add(xsltforms_message_2_2_6_4_2_2_);var xsltforms_message_2_4_6_4_2_2_ = new XsltForms_message(xsltforms_subform,xsltforms_subform.id + \"-message-2_4_6_4_2_2_\",null,null,null,null,null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-2_2_4_6_4_2_2_\",0,new XsltForms_binding(\"xsd:string\", \"event('response-body')\"),null);var xsltforms_action_4_6_4_2_2_ = new XsltForms_action(xsltforms_subform,\"event('response-body')!='null'\",null,null).add(xsltforms_message_2_4_6_4_2_2_);new XsltForms_listener(document.getElementById(\"good_save\"),null,\"xforms-submit-done\",null,function(evt) {XsltForms_browser.run(xsltforms_action_2_6_4_2_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});new XsltForms_listener(document.getElementById(\"good_save\"),null,\"xforms-submit-error\",null,function(evt) {XsltForms_browser.run(xsltforms_action_4_6_4_2_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});new XsltForms_submission(xsltforms_subform,\"xslttransformation\",xsltforms_model_4_2_2_,\"instance('mainInstance')\",null,\"secured/xslttransformer?userdata=default&xsltfile=xformsxslttransformation_test.xsl\",\"post\",null,null,null,null,null,null,\"instance\",null,\"mainInstance\",\"&\",null,true,true,true,null,null);var xsltforms_bind_10_4_2_2_ = new XsltForms_bind(xsltforms_subform,xsltforms_subform.id + \"-bind-10_4_2_2_\",xsltforms_model_4_2_2_,\".\",null,null,null,null,null,null);XsltForms_instance.create(xsltforms_subform,\"srvdata\",xsltforms_model_4_2_2_,false,\"application/xml\",null,'<schema><xformsContext><main>Запасы на конец отчетного периода - Всего</main><session>&lt;sessioncontext&gt;&#xA;   &lt;username&gt;master&lt;/username&gt;&#xA;   &lt;sid/&gt;&#xA;   &lt;email/&gt;&#xA;   &lt;fullusername&gt;master&lt;/fullusername&gt;&#xA;   &lt;phone/&gt;&#xA;   &lt;urlparams&gt;&#xA;      &lt;urlparam name=&quot;qq1&quot; value=&quot;[ww1]&quot;/&gt;&#xA;      &lt;urlparam name=&quot;qq2&quot; value=&quot;[ww2]&quot;/&gt;&#xA;   &lt;/urlparams&gt;&#xA;   &lt;userdata&gt;default&lt;/userdata&gt;&#xA;   &lt;related/&gt;&#xA;&lt;/sessioncontext&gt;&#xA;</session></xformsContext><element><id><string>61</string></id><position>7</position><type>XFORMS</type><editable>false</editable><procName>xforms_proc1</procName><templateName>Showcase_Template.xml</templateName><hideOnLoad>false</hideOnLoad><neverShowInPanel>false</neverShowInPanel><htmlAttrs/><cacheData>false</cacheData><refreshByTimer>false</refreshByTimer><refreshInterval>600</refreshInterval><procs><entry><key><string>proc1</string></key><value><id><string>proc1</string></id><name>xforms_saveproc1</name><type>SAVE</type></value></entry><entry><key><string>proc2</string></key><value><id><string>proc2</string></id><name>xforms_submission1</name><type>SUBMISSION</type></value></entry></procs><showLoadingMessage>false</showLoadingMessage><needReload>true</needReload></element></schema>');new XsltForms_input(xsltforms_subform,xsltforms_subform.id + \"-input-2_4_4_2_\",0,\"text\",new XsltForms_binding(null, \"/schema/info/name\"),null,null,null,null,null);var xsltforms_trigger_4_4_4_2_ = new XsltForms_trigger(xsltforms_subform,xsltforms_subform.id + \"-trigger-4_4_4_2_\",null);var xsltforms_load_2_4_4_4_4_2_ = new XsltForms_load(xsltforms_subform,null,\"javascript:showSelector({               id : '61',                        procCount : '[dbo].[regionscount]',                        procList  : '[dbo].[regionslist]',                                               generalFilters      : '',                        currentValue        : '',                        windowCaption       : 'Выберите название',                        onSelectionComplete : function(ok, selected){      if (ok) {      var a = xforms.defaultModel.defaultInstance.doc.getElementsByTagName('info')[0].getElementsByTagName('name')[0];      setValue(a, selected.name);          xforms.ready = false;      xforms.refresh();      xforms.ready = true;        }            }});;\",null,null,null,null,null,null);var xsltforms_action_4_4_4_4_2_ = new XsltForms_action(xsltforms_subform,null,null,null).add(xsltforms_load_2_4_4_4_4_2_);new XsltForms_listener(document.getElementById(xsltforms_subform.id + \"-trigger-4_4_4_2_\"),null,\"DOMActivate\",null,function(evt) {XsltForms_browser.run(xsltforms_action_4_4_4_4_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});var xsltforms_select1_2_8_4_2_ = new XsltForms_select(xsltforms_subform,xsltforms_subform.id + \"-select1-2_8_4_2_\",false,true,new XsltForms_binding(null, \"/schema/info/eyescolour\"),true);var xsltforms_item_2_2_8_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-2_2_8_4_2_\",null,null);var xsltforms_item_4_2_8_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-4_2_8_4_2_\",null,null);var xsltforms_item_6_2_8_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-6_2_8_4_2_\",null,null);var xsltforms_item_8_2_8_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-8_2_8_4_2_\",null,null);var xsltforms_select1_2_12_4_2_ = new XsltForms_select(xsltforms_subform,xsltforms_subform.id + \"-select1-2_12_4_2_\",false,false,new XsltForms_binding(null, \"/schema/info/eyescolour\"),true);var xsltforms_item_2_2_12_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-2_2_12_4_2_\",null,null);var xsltforms_item_4_2_12_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-4_2_12_4_2_\",null,null);var xsltforms_item_6_2_12_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-6_2_12_4_2_\",null,null);var xsltforms_item_8_2_12_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-8_2_12_4_2_\",null,null);var xsltforms_select_2_16_4_2_ = new XsltForms_select(xsltforms_subform,xsltforms_subform.id + \"-select-2_16_4_2_\",true,true,new XsltForms_binding(null, \"/schema/info/music\"),true);var xsltforms_item_2_2_16_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-2_2_16_4_2_\",null,null);var xsltforms_item_4_2_16_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-4_2_16_4_2_\",null,null);var xsltforms_item_6_2_16_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-6_2_16_4_2_\",null,null);var xsltforms_select_2_20_4_2_ = new XsltForms_select(xsltforms_subform,xsltforms_subform.id + \"-select-2_20_4_2_\",true,false,new XsltForms_binding(null, \"/schema/info/music\"),true);var xsltforms_item_2_2_20_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-2_2_20_4_2_\",null,null);var xsltforms_item_4_2_20_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-4_2_20_4_2_\",null,null);var xsltforms_item_6_2_20_4_2_ = new XsltForms_item(xsltforms_subform,xsltforms_subform.id + \"-item-6_2_20_4_2_\",null,null);new XsltForms_input(xsltforms_subform,xsltforms_subform.id + \"-textarea-2_24_4_2_\",0,\"textarea\",new XsltForms_binding(null, \"/schema/info/comment\"),null,null,null,null,null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-4_26_4_2_\",0,new XsltForms_binding(\"xsd:string\", \"'Уважаемый '\"),null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-6_26_4_2_\",0,new XsltForms_binding(\"xsd:string\", \"/schema/info/name\"),null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-8_26_4_2_\",0,new XsltForms_binding(\"xsd:string\", \"'! Ваш рост: '\"),null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-10_26_4_2_\",0,new XsltForms_binding(\"xsd:string\", \"/schema/info/growth\"),null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-12_26_4_2_\",0,new XsltForms_binding(\"xsd:string\", \"', ваш цвет глаз: '\"),null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-14_26_4_2_\",0,new XsltForms_binding(\"xsd:string\", \"/schema/info/eyescolour\"),null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-16_26_4_2_\",0,new XsltForms_binding(\"xsd:string\", \"', ваш музыкальные предпочения: '\"),null);new XsltForms_output(xsltforms_subform,xsltforms_subform.id + \"-output-18_26_4_2_\",0,new XsltForms_binding(\"xsd:string\", \"/schema/info/music\"),null);var xsltforms_trigger_2_28_4_2_ = new XsltForms_trigger(xsltforms_subform,xsltforms_subform.id + \"-trigger-2_28_4_2_\",null);var xsltforms_send_2_4_2_28_4_2_ = new XsltForms_dispatch(xsltforms_subform,\"xforms-submit\",\"good_save\",null,null,null);var xsltforms_action_4_2_28_4_2_ = new XsltForms_action(xsltforms_subform,null,null,null).add(xsltforms_send_2_4_2_28_4_2_);new XsltForms_listener(document.getElementById(xsltforms_subform.id + \"-trigger-2_28_4_2_\"),null,\"DOMActivate\",null,function(evt) {XsltForms_browser.run(xsltforms_action_4_2_28_4_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});var xsltforms_trigger_4_28_4_2_ = new XsltForms_trigger(xsltforms_subform,xsltforms_subform.id + \"-trigger-4_28_4_2_\",null);var xsltforms_send_2_4_4_28_4_2_ = new XsltForms_dispatch(xsltforms_subform,\"xforms-submit\",\"wrong_save\",null,null,null);var xsltforms_action_4_4_28_4_2_ = new XsltForms_action(xsltforms_subform,null,null,null).add(xsltforms_send_2_4_4_28_4_2_);new XsltForms_listener(document.getElementById(xsltforms_subform.id + \"-trigger-4_28_4_2_\"),null,\"DOMActivate\",null,function(evt) {XsltForms_browser.run(xsltforms_action_4_4_28_4_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});var xsltforms_trigger_6_28_4_2_ = new XsltForms_trigger(xsltforms_subform,xsltforms_subform.id + \"-trigger-6_28_4_2_\",null);var xsltforms_send_2_4_6_28_4_2_ = new XsltForms_dispatch(xsltforms_subform,\"xforms-submit\",\"xslttransformation\",null,null,null);var xsltforms_action_4_6_28_4_2_ = new XsltForms_action(xsltforms_subform,null,null,null).add(xsltforms_send_2_4_6_28_4_2_);new XsltForms_listener(document.getElementById(xsltforms_subform.id + \"-trigger-6_28_4_2_\"),null,\"DOMActivate\",null,function(evt) {XsltForms_browser.run(xsltforms_action_4_6_28_4_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});var xsltforms_trigger_2_30_4_2_ = new XsltForms_trigger(xsltforms_subform,xsltforms_subform.id + \"-trigger-2_30_4_2_\",null);var xsltforms_load_2_4_2_30_4_2_ = new XsltForms_load(xsltforms_subform,null,\"javascript:gwtXFormSave('61', '1',  Writer.toString(xforms.defaultModel.getInstanceDocument('mainInstance')))\",null,null,null,null,null,null);var xsltforms_action_4_2_30_4_2_ = new XsltForms_action(xsltforms_subform,null,null,null).add(xsltforms_load_2_4_2_30_4_2_);new XsltForms_listener(document.getElementById(xsltforms_subform.id + \"-trigger-2_30_4_2_\"),null,\"DOMActivate\",null,function(evt) {XsltForms_browser.run(xsltforms_action_4_2_30_4_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});var xsltforms_trigger_6_30_4_2_ = new XsltForms_trigger(xsltforms_subform,xsltforms_subform.id + \"-trigger-6_30_4_2_\",null);var xsltforms_load_2_4_6_30_4_2_ = new XsltForms_load(xsltforms_subform,null,\"javascript:gwtXFormFilter('61', '2',  Writer.toString(xforms.defaultModel.getInstanceDocument('mainInstance')))\",null,null,null,null,null,null);var xsltforms_action_4_6_30_4_2_ = new XsltForms_action(xsltforms_subform,null,null,null).add(xsltforms_load_2_4_6_30_4_2_);new XsltForms_listener(document.getElementById(xsltforms_subform.id + \"-trigger-6_30_4_2_\"),null,\"DOMActivate\",null,function(evt) {XsltForms_browser.run(xsltforms_action_4_6_30_4_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});var xsltforms_trigger_8_30_4_2_ = new XsltForms_trigger(xsltforms_subform,xsltforms_subform.id + \"-trigger-8_30_4_2_\",null);var xsltforms_load_2_4_8_30_4_2_ = new XsltForms_load(xsltforms_subform,null,\"javascript:gwtXFormUpdate('61', '3',  Writer.toString(xforms.defaultModel.getInstanceDocument('mainInstance')))\",null,null,null,null,null,null);var xsltforms_action_4_8_30_4_2_ = new XsltForms_action(xsltforms_subform,null,null,null).add(xsltforms_load_2_4_8_30_4_2_);new XsltForms_listener(document.getElementById(xsltforms_subform.id + \"-trigger-8_30_4_2_\"),null,\"DOMActivate\",null,function(evt) {XsltForms_browser.run(xsltforms_action_4_8_30_4_2_,XsltForms_browser.getId(evt.currentTarget ? evt.currentTarget : evt.target),evt,false,true);});XsltForms_browser.dialog.show('statusPanel');if (xsltforms_subform.id === \"xsltforms-mainform\") {XsltForms_browser.idPf = xsltforms_subform.id + \"-\";var xsltforms_model_config = new XsltForms_model(xsltforms_subform,xsltforms_subform.id + \"-model-config\",null);var xsltforms_instance_config = new XsltForms_instance(xsltforms_subform,xsltforms_subform.id + \"-instance-config\",xsltforms_model_config,true,'application/xml',null,'<properties><language>navigator</language><calendar.day0>Mon</calendar.day0><calendar.day1>Tue</calendar.day1><calendar.day2>Wed</calendar.day2><calendar.day3>Thu</calendar.day3><calendar.day4>Fri</calendar.day4><calendar.day5>Sat</calendar.day5><calendar.day6>Sun</calendar.day6><calendar.initDay>6</calendar.initDay><calendar.month0>January</calendar.month0><calendar.month1>February</calendar.month1><calendar.month2>March</calendar.month2><calendar.month3>April</calendar.month3><calendar.month4>May</calendar.month4><calendar.month5>June</calendar.month5><calendar.month6>July</calendar.month6><calendar.month7>August</calendar.month7><calendar.month8>September</calendar.month8><calendar.month9>October</calendar.month9><calendar.month10>November</calendar.month10><calendar.month11>December</calendar.month11><format.date>MM/dd/yyyy</format.date><format.datetime>MM/dd/yyyy hh:mm:ss</format.datetime><format.decimal>.</format.decimal><status>... Loading ...</status></properties>');XsltForms_browser.config = xsltforms_instance_config.doc.documentElement;var d2 = new Date();XsltForms_globals.creatingtime = d2 - d1;XsltForms_globals.init();var d3 = new Date();XsltForms_globals.inittime = d3 - d2;} else {xsltforms_subform.construct();XsltForms_globals.openAction();XsltForms_globals.refresh();XsltForms_globals.closeAction();XsltForms_browser.dialog.hide('statusPanel');}} catch (e) {alert('')}};";
	private static final String XFORM_2_SCRIPT2 =
		"function xsltforms_init() {try {xsltforms_initImpl();} catch(e) {alert('')}}";

	// CHECKSTYLE:ON

	private XFormTestsCommon() {
		throw new UnsupportedOperationException();
	}

	/**
	 * Очищает DOM-модель и выполняет начальную инициализацию.
	 */
	public static void clearDOM() {

		com.google.gwt.user.client.Element elem = DOM.getElementById("dynastyle");
		if (elem != null) {
			elem.removeFromParent();
		}

		elem = DOM.getElementById("target");
		if (elem != null) {
			elem.removeFromParent();
		}

		elem = DOM.getElementById("showcaseAppContainer");
		if (elem != null) {
			elem.removeFromParent();
		}

		com.google.gwt.user.client.Element bodyElem = RootPanel.getBodyElement();
		com.google.gwt.user.client.Element div = DOM.createDiv();
		DOM.setElementAttribute(div, "id", "target");
		DOM.insertChild(bodyElem, div, 0);

		div = DOM.createDiv();
		DOM.setElementAttribute(div, "id", "showcaseAppContainer");
		DOM.insertChild(bodyElem, div, 1);

	}

	/**
	 * Создает XForms для тестов.
	 * 
	 * @return XForms
	 */
	public static XForm createXForms2() {

		XForm xform = new XForm();
		final int numParts = 4;
		ArrayList<String> xFormParts = new ArrayList<String>(numParts);
		xFormParts.add(XFORM_2_BODY);
		xFormParts.add(XFORM_2_CSS);
		xFormParts.add(XFORM_2_SCRIPT1);
		xFormParts.add(XFORM_2_SCRIPT2);
		xform.setXFormParts(xFormParts);

		Action ac = new Action();
		ac.setContext(new CompositeContext());
		ac.setDataPanelActionType(DataPanelActionType.DO_NOTHING);
		// ac.setKeepUserSettings(aKeepUserSettings)
		xform.setDefaultAction(ac);

		ac = new Action();
		ac.setContext(new CompositeContext());
		ac.setDataPanelActionType(DataPanelActionType.DO_NOTHING);
		ac.setKeepUserSettings(true);
		HTMLEvent ev = new HTMLEvent();
		ev.setAction(ac);
		ev.setLinkId("1");
		ev.setInteractionType(InteractionType.SINGLE_CLICK);
		xform.getEventManager().setEvents(Arrays.asList(ev));

		return xform;
	}

	/**
	 * Создает XFormPanel для тестов.
	 * 
	 * @return XFormPanel
	 */
	public static XFormPanel createXFormPanelForTests1() {

		DataPanelElementInfo dpei = new DataPanelElementInfo();
		dpei.setId("1");
		dpei.setPosition(1);
		dpei.setType(DataPanelElementType.XFORMS);
		dpei.setRefreshByTimer(true);

		return new XFormPanel(dpei);
	}

	/**
	 * Создает XFormPanel для тестов.
	 * 
	 * @return XFormPanel
	 */
	public static XFormPanel createXFormPanelForTests2() {

		CompositeContext context = new CompositeContext();

		DataPanelElementInfo dpei = new DataPanelElementInfo();
		dpei.setId("1");
		dpei.setPosition(1);
		dpei.setType(DataPanelElementType.XFORMS);
		dpei.setRefreshByTimer(true);

		XForm xform = createXForms2();

		return new XFormPanel(context, dpei, xform);
	}

}
